<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <title>WebSockets - Simple chat</title>

    <script src='svg.js' type='text/javascript'></script>
    <script src='../ramda/dist/ramda.js' type='text/javascript'></script>
  </head>

  <body>
    <div id="content"></div>
    <div>
      <div id="field">Connecting...</div>
      <input type="text" id="input"/>
    </div>

    <script src="./client.js"></script>
    <script type='text/javascript'>

var svgns = 'http://www.w3.org/2000/svg';
var container = document.createElementNS(svgns, 'svg');
container.setAttribute('width', 1000);
container.setAttribute('height', 800);
document.getElementById('content').appendChild(container);

svg = SVG();

var setAgent = function (agent, position, velocity) {
  if (velocity < 0) {
    svg.setRotation(agent, 180);
  }
  svg.setTranslation(agent, [position + 100, 100]);
}

var newAgent = function (name, position, velocity) {
  var agent = svg.setScaling(svg.arrow({ 'id': name }), 100);
  setAgent(agent, position, velocity);
  container.appendChild(agent);
}

var updateAgent = function (name, position, velocity) {
  var agent = document.getElementById(name);
  setAgent(agent, position, velocity);
}

    </script>
  </body>

</html>
